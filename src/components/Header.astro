---
import { ToggleDarkMode } from "../components/ToggleDarkMode.jsx";
import { Search } from "./Search.jsx";

import Menu from "../components/Menu.astro";
import "@fontsource/playfair-display/900-italic.css";

import { contentfulClient } from "../utils/contentful";

const response = await contentfulClient.getTags();
const tags = response.items.map((item) => {
  if (item.name == "Main") return;
  return [item.sys.id, item.name];
});
const menuItems = tags.filter((item) => item);
//sort menu items alphabetically
menuItems.sort((a, b) => {
  if (a[1] < b[1]) return -1;
  if (a[1] > b[1]) return 1;
  return 0;
});

---

<header>
  <div class="flex flex-wrap justify-between p-3" id="header">
    <a href="/" class="logo px-5 lg:px-10">e-clare</a>
    <div class="flex gap-1 lg:gap-10 align-center place-items-center">
      <Search client:only />
      <ToggleDarkMode client:only />
      <Menu />
    </div>
  </div>
  <nav class="h-0 transition-all opacity-0 z-0" id="mainmenu">
    <ul
      class="flex flex-col gap-5 pt-5 grow justify-center items-end whitespace-nowrap px-10"
    >
      {
        menuItems.map((label) => {
          return (
            <li>
              <a href={label[0]}>{label[1]}</a>
            </li>
          );
        })
      }
    </ul>
  </nav>
</header>

<style lang="css">
  [astro-icon] {
    height: 2rem;
  }
  .logo {
    font-family: "Playfair Display", serif;
    font-size: 2.5rem;
    font-weight: 900;
    font-style: italic;
  }
</style>
